---
title:  "[AWS] 6주차-2 MariaDB 접속 및 기본 사용 실습"
subtitle:   "MariaDB 접속 및 기본 사용 실습"
date: 2021-07-14 23:00:00
categories: AWS
tags: AFOS[2기]
---

CloudFormation 스택 생성하기 - 링크 클릭 후 템플릿 파일로 기본 환경 자동 배포
https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-2#/stacks/new?stackName=DBLab&templateURL=https:%2F%2Fs3.ap-northeast-2.amazonaws.com%2Fcloudformation.cloudneta.net%2FDB%2Faws-db.yaml




 
 `다음` 클릭
![스크린샷 2021-07-15 오전 1 01 45](https://user-images.githubusercontent.com/87232411/125659192-87264bb2-32b0-4d41-a8a3-c4681853f260.png)

키 설정 후 ` 다음` 클릭
![스크린샷 2021-07-15 오전 1 01 51](https://user-images.githubusercontent.com/87232411/125659203-d2a4fb70-2a98-479d-b4fe-202aba1a7614.png)

기본 값으로 두고 `다음` 클릭
![스크린샷 2021-07-15 오전 1 01 58](https://user-images.githubusercontent.com/87232411/125659207-49c45819-4126-44c3-af88-2d19ed6d3498.png)

`스택 생성` 클릭
![스크린샷 2021-07-15 오전 1 02 04](https://user-images.githubusercontent.com/87232411/125659209-96fae96b-dcba-4c20-b678-5124558b35b7.png)

DBLab이 생성되었습니다
![스크린샷 2021-07-15 오전 1 03 36](https://user-images.githubusercontent.com/87232411/125659211-0a8702e8-3ced-4803-9571-10de996f4caa.png)

SSH로 WebSrv 접속 후  
```bash
# IP확인 및 DBSrv ping 테스트
ip a
ping 10.1.2.10

# DBSrv 로 MySQL 접속 (계정 정보: root/qwe123)
mysql -h 10.1.2.10 -uroot -pqwe123
```
<img width="563" alt="스크린샷 2021-07-15 오전 1 06 18" src="https://user-images.githubusercontent.com/87232411/125659213-b3004f56-9e3c-4a75-931d-a435b22568da.png">
<img width="500" alt="스크린샷 2021-07-15 오전 1 06 33" src="https://user-images.githubusercontent.com/87232411/125659215-564ffa1c-1628-4d2f-b86a-cb77427fd673.png">
<img width="562" alt="스크린샷 2021-07-15 오전 1 06 53" src="https://user-images.githubusercontent.com/87232411/125659216-94a9c4b1-3261-490c-8c58-1738dd8deb2f.png">

SSH로 DBSrv에 접속 후
```bash
# IP확인
ip a

# MySQL 접속 (계정 정보: root/qwe123)
mysql -uroot -pqwe123

``` 
<img width="560" alt="스크린샷 2021-07-15 오전 1 07 06" src="https://user-images.githubusercontent.com/87232411/125659218-f4455832-314e-4921-a1ee-9325888fad79.png">
<img width="562" alt="스크린샷 2021-07-15 오전 1 07 17" src="https://user-images.githubusercontent.com/87232411/125659221-ca461efc-5351-4af6-8360-2165dd0e0825.png">

### MariaDB 에서 기본적인 SQL문 사용해보기
```sql
# DB 서버의 상태 정보
MariaDB [(none)]> status;

# 데이터베이스(=스키마) 확인
SHOW DATABASES;

# employees 데이터베이스 선택 하기
USE employees;
MariaDB [(none)]> **USE employees;**
MariaDB [**employees**]>

# 테이블 확인
SHOW TABLES;

# 테이블 필드와 타입 등 정보 확인
DESC employees;

# employees 테이블 조회 하기
SELECT * FROM employees;
SELECT * FROM employees LIMIT 10;

# 특정 열(컬럼=필드) 기준 오름/내림차순으로 정렬 조회 하기
# -- 공백이 있는 개체의 이름 사용 시는 백틱(backtick) `` 으로 묶어줘야 하나의 이름으로 인식함
SELECT * FROM employees ORDER BY `emp_no` DESC LIMIT 100;

# 특정 행(=로우=레코드)만 출력 - Mary 이름(first_name) , Baba 성(last_name)
SELECT * FROM employees WHERE first_name = 'Mary';
```
<img width="564" alt="스크린샷 2021-07-15 오전 1 07 35" src="https://user-images.githubusercontent.com/87232411/125659224-126f3840-bdfc-4d23-a09b-7633d3c55cf4.png">
<img width="323" alt="스크린샷 2021-07-15 오전 1 07 50" src="https://user-images.githubusercontent.com/87232411/125659226-26807007-7e59-45c9-a5f6-b5a78720e60c.png">
<img width="499" alt="스크린샷 2021-07-15 오전 1 08 06" src="https://user-images.githubusercontent.com/87232411/125659229-66072272-467a-4e3e-9f16-dbf55d0a74d2.png">
<img width="339" alt="스크린샷 2021-07-15 오전 1 08 22" src="https://user-images.githubusercontent.com/87232411/125659230-6ea9ec21-1480-4661-a598-6ea9b9a1342e.png">
<img width="527" alt="스크린샷 2021-07-15 오전 1 09 45" src="https://user-images.githubusercontent.com/87232411/125659232-9bad22b7-d008-403d-96e3-ed3a87761a05.png">
<img width="552" alt="스크린샷 2021-07-15 오전 1 10 12" src="https://user-images.githubusercontent.com/87232411/125659235-b3abb029-47bf-4818-b25b-200a1aac548e.png">
<img width="519" alt="스크린샷 2021-07-15 오전 1 10 22" src="https://user-images.githubusercontent.com/87232411/125659238-3d409269-88c5-49ab-8abb-24ccb8a2a76e.png">
<img width="559" alt="스크린샷 2021-07-15 오전 1 10 34" src="https://user-images.githubusercontent.com/87232411/125659241-159aad6d-0d36-44e2-8c59-58a5b319437b.png">
<img width="540" alt="스크린샷 2021-07-15 오전 1 10 58" src="https://user-images.githubusercontent.com/87232411/125659242-3f4093b5-a3cd-42b2-b5d6-f5600c7c111e.png">

### 생성 및 데이터(레코드) 생성 변경
```sql
# 스키마(=데이터베이스) 생성
CREATE SCHEMA `shopdb`;
**SHOW DATABASES;**
USE shopdb;

# 테이블 생성 - (Workbench) GUI 설정 보여주기 - 아래 복붙해서 적용하기
CREATE TABLE `shopdb`.`memberTBL` (
  `memberID` CHAR(8) NOT NULL,
  `memberName` CHAR(5) NOT NULL,
  `memberAddress` CHAR(20) NULL,
  `age` INT NOT NULL,
  PRIMARY KEY (`memberID`));

# 테이블 정보 확인
DESC memberTBL;

# 데이터 넣기 - (Workbench) GUI 설정 보여주기 - (카톡 멤버 정보 받기) - 아래 복붙해서 적용하기
SELECT * FROM memberTBL;

# 행(=데이터=레코드) 1개 넣기
INSERT INTO memberTBL VALUES ('icebear2n2', '아이수베어', '제주도 제주시', '19');

## 카톡 멤버 정보 받아서 넣기
INSERT INTO memberTBL VALUES ('Gasida', '가시다', '서울 잠실동 분당구', '30');
INSERT INTO memberTBL VALUES ('User4', '유나', '경기 성남시 분당구', '27');
INSERT INTO memberTBL VALUES ('Minyoung', '민영', '경기도 부천시 중동', '30'); 
INSERT INTO memberTBL VALUES ('Eunji', '은지', '인천 남구 주안동', '28');
INSERT INTO memberTBL VALUES ('Yujeong', '유정', '서울 은평구 증산동', '29'); 

# 조회
SELECT * FROM memberTBL;
SELECT memberName, memberAddress FROM memberTBL;
SELECT * FROM memberTBL WHERE age = 27;

# 행(=데이터=레코드) 변경(=업데이트)
UPDATE memberTBL SET memberID='Yuna' WHERE memberName='유나';
SELECT * FROM memberTBL;
```
<img width="335" alt="스크린샷 2021-07-15 오전 1 11 25" src="https://user-images.githubusercontent.com/87232411/125659243-f778732c-6a67-42fb-b5c8-79fba2d7f5b2.png">
<img width="320" alt="스크린샷 2021-07-15 오전 1 11 36" src="https://user-images.githubusercontent.com/87232411/125659248-38b90d21-04d2-498c-a675-558ebdf00e3c.png">
<img width="267" alt="스크린샷 2021-07-15 오전 1 11 48" src="https://user-images.githubusercontent.com/87232411/125659249-aa01aab5-5809-4f8c-9bd5-71794e64a373.png">
<img width="435" alt="스크린샷 2021-07-15 오전 1 12 00" src="https://user-images.githubusercontent.com/87232411/125659250-b0d28d85-74fa-4fa2-90fe-2fa26f9fde5f.png">
<img width="474" alt="스크린샷 2021-07-15 오전 1 12 13" src="https://user-images.githubusercontent.com/87232411/125659251-74f6ff70-dfaf-40f9-b91e-82f09cb55a84.png">
<img width="356" alt="스크린샷 2021-07-15 오전 1 12 57" src="https://user-images.githubusercontent.com/87232411/125659253-e46ab7c5-b3fa-485d-b347-a6c652413f6d.png">
<img width="695" alt="스크린샷 2021-07-15 오전 1 14 55" src="https://user-images.githubusercontent.com/87232411/125659255-34ac7a5f-ff96-4380-a4ee-355d4b1f4e1e.png">
<img width="696" alt="스크린샷 2021-07-15 오전 1 15 43" src="https://user-images.githubusercontent.com/87232411/125659257-d3a82eea-4a69-4ff6-9c91-ff04e55dae6f.png">
<img width="505" alt="스크린샷 2021-07-15 오전 1 16 10" src="https://user-images.githubusercontent.com/87232411/125659259-0dca49c9-17c7-4a89-8e64-3724360a2859.png">
<img width="564" alt="스크린샷 2021-07-15 오전 1 17 00" src="https://user-images.githubusercontent.com/87232411/125659260-4d782599-ee69-4ad3-a6ff-00fa45381b61.png">
<img width="500" alt="스크린샷 2021-07-15 오전 1 17 21" src="https://user-images.githubusercontent.com/87232411/125659264-c8f31d14-bac1-4b55-a3d8-389606ecb5cf.png">
<img width="583" alt="스크린샷 2021-07-15 오전 1 17 32" src="https://user-images.githubusercontent.com/87232411/125659266-f8647494-90b6-41f5-95a6-559ba0124fc4.png">
<img width="527" alt="스크린샷 2021-07-15 오전 1 17 41" src="https://user-images.githubusercontent.com/87232411/125659269-9dc59f70-8c17-4a43-b20a-d66a7655b049.png">

### 트리 파일 확인
```bash
tree /var/www/html
```
<img width="396" alt="스크린샷 2021-07-15 오전 1 19 05" src="https://user-images.githubusercontent.com/87232411/125659272-08a4d22e-acc4-487a-84be-6f776a5e8624.png">

### 심화 옵션)HTTP://WebEC2_PublicIP/php_mysql/1.php 형식으로 접속

`1.php` 접속
<img width="486" alt="스크린샷 2021-07-15 오전 1 19 37" src="https://user-images.githubusercontent.com/87232411/125659274-6dbc0d56-45b3-4a17-a3f8-3cfa6adc4bc7.png">

```bash
curl localhost/php_mysql/1.php
```
<img width="380" alt="스크린샷 2021-07-15 오전 1 20 21" src="https://user-images.githubusercontent.com/87232411/125659276-d519b64c-553c-41b5-8699-a8e92fc5d907.png">

`2.php` 접속
```php
while true; do mysql -h 10.1.2.10 -uroot -pqwe123 -e "show databases;"; date; sleep 1; done 
```
<img width="691" alt="스크린샷 2021-07-15 오전 1 22 08" src="https://user-images.githubusercontent.com/87232411/125659278-459b4f1c-04a9-4e2a-98d6-ba7f165b6975.png">
<img width="505" alt="스크린샷 2021-07-15 오전 1 22 19" src="https://user-images.githubusercontent.com/87232411/125659279-99de7272-f3ef-4cff-9665-a915d6c238fa.png">

`3.php` 접속
```php
while true; do mysql -h 10.1.2.10 -uroot -pqwe123 -e "USE sqlDB2;show tables;"; date; sleep 1; done
```
<img width="640" alt="스크린샷 2021-07-15 오전 1 22 40" src="https://user-images.githubusercontent.com/87232411/125659280-3edb024f-3ceb-40b9-8770-e0ead70078d8.png">
<img width="471" alt="스크린샷 2021-07-15 오전 1 22 55" src="https://user-images.githubusercontent.com/87232411/125659281-944dabd6-e41b-40e6-a957-41b988e319df.png">

`4.php` 접속
```php
while true; do mysql -h 10.1.2.10 -uroot -pqwe123 -e "USE sqlDB2;select * from userTbl;"; date; sleep 1; done
```
<img width="664" alt="스크린샷 2021-07-15 오전 1 23 09" src="https://user-images.githubusercontent.com/87232411/125659282-bab63dcd-b6e9-455f-8f72-29f3f732cbdb.png">
<img width="466" alt="스크린샷 2021-07-15 오전 1 23 18" src="https://user-images.githubusercontent.com/87232411/125659283-662dabf3-593f-4410-8e7b-e2d930d2a469.png">

`5.php` 접속
<img width="645" alt="스크린샷 2021-07-15 오전 1 23 33" src="https://user-images.githubusercontent.com/87232411/125659286-855a20a7-7eb2-441b-85e9-17f00480ef07.png">

직접 레코드 추가 후 웹 페이지(5.php) 반영 확인
```sql
mysql -h 10.1.2.10 -uroot -pqwe123
USE sqlDB2;
INSERT INTO userTbl VALUES ('AAA', '가시다', 2000, '전주', '019', '1234567', 179, '2015-5-5');
```
<img width="473" alt="스크린샷 2021-07-15 오전 1 23 45" src="https://user-images.githubusercontent.com/87232411/125659289-33e04fc5-9abf-47bf-a9bd-3e2cfa6d8a4b.png">
<img width="586" alt="스크린샷 2021-07-15 오전 1 24 26" src="https://user-images.githubusercontent.com/87232411/125659293-4746a539-e7e1-4ab4-b278-d25106f82a75.png">
<img width="698" alt="스크린샷 2021-07-15 오전 1 25 21" src="https://user-images.githubusercontent.com/87232411/125659297-cfede565-6fa8-4ee8-b01c-55ac73681b28.png">

다시 5.php를 조회해보면 내가 추가된 걸 볼 수 있다
<img width="473" alt="스크린샷 2021-07-15 오전 1 25 31" src="https://user-images.githubusercontent.com/87232411/125659299-3f4f3bc4-2671-432e-9598-172c86606b74.png">

## 심화 옵션) 회원 관리 시스템

HTTP://WebEC2_PublicIP/usermgmt/main.html 형식으로 접속
![스크린샷 2021-07-15 오전 1 26 44](https://user-images.githubusercontent.com/87232411/125659300-6d0942ce-6c9b-4575-80c2-3a58ac4618a1.png)


`신규 회원 등록`을 누른 후에 정보를 입력
![스크린샷 2021-07-15 오전 1 27 24](https://user-images.githubusercontent.com/87232411/125659301-37b3ba66-5c6c-4878-8018-a90be2c8f8e9.png)

오 등록이 되었습니다
![스크린샷 2021-07-15 오전 1 27 35](https://user-images.githubusercontent.com/87232411/125659307-8248bfdf-9205-413c-91d3-0234cbb55c20.png)

회원을 조회해보니 가시다님이랑 제가 있네요 ㅎㅎ 
![스크린샷 2021-07-15 오전 1 27 46](https://user-images.githubusercontent.com/87232411/125659310-ea33ecfd-d6ae-4fb5-92e5-8070c7306363.png)

자 회원 삭제를 해줍시다
![스크린샷 2021-07-15 오전 1 27 52](https://user-images.githubusercontent.com/87232411/125659312-26bd48f1-0a26-4ad7-8185-2c60b3f22a57.png)

`회원 삭제`를 클릭
![스크린샷 2021-07-15 오전 1 27 57](https://user-images.githubusercontent.com/87232411/125659314-0c13697c-e396-4df1-a153-00d3d1527814.png)

삭제 되었네요
![스크린샷 2021-07-15 오전 1 28 01](https://user-images.githubusercontent.com/87232411/125659316-cc048c3b-d3fe-43e0-8683-aac11f147792.png)

보시다시피 제가 사라졌습니다
![스크린샷 2021-07-15 오전 1 28 06](https://user-images.githubusercontent.com/87232411/125659318-a9331fab-6897-4f55-bc16-274ea2fb7c42.png)


<br/>
<br/>
<br/>

<hr/>

**참고 자료 : AFOS[2기] 노션 내용**
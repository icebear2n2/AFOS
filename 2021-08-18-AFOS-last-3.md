---
title:  "[AWS] 10주차 -3 WebSrv-Leader 인스턴스를 이용하여 Wordpress 초기 구성"
subtitle:   "WebSrv-Leader 인스턴스를 이용하여 Wordpress 초기 구성"
date: 2021-08-18 14:30:00
categories: AWS
tags: AFOS[2기]
---
## 실습 관련 구성
<img src="/css/images/1212.png">

전편에서 생성한 RDS 엔드포인트(접속 주소) 메모하기

RDS 생성 후 `구성` 탭 메뉴에서 `다중 AZ와 보조 영역` 확인
<img width="244" alt="스크린샷 2021-08-18 오후 2 39 24" src="https://user-images.githubusercontent.com/87232411/129845046-289897cd-44d2-4cc9-9b0e-a2eca20e37b3.png">

ALB에 WevSrv-Leader 인스턴스 대상 등록

`ALB-TG` 클릭
<img width="223" alt="스크린샷 2021-08-18 오후 2 39 47" src="https://user-images.githubusercontent.com/87232411/129845047-4de7d3e6-5a32-4678-956b-c118b31a5152.png">

`Register targets` 클릭
<img width="244" alt="스크린샷 2021-08-18 오후 2 39 58" src="https://user-images.githubusercontent.com/87232411/129845049-9f646b6a-5039-4f68-91ac-3fe80c28c5c2.png">

인스턴스 체크 후 -> `Include as pending below` 클릭
<img width="1399" alt="스크린샷 2021-08-18 오후 2 40 06" src="https://user-images.githubusercontent.com/87232411/129845051-dd6d2068-f567-47cf-9149-e5bfb10c85db.png">

`Register pending targets` 클릭
<img width="1392" alt="스크린샷 2021-08-18 오후 2 40 15" src="https://user-images.githubusercontent.com/87232411/129845056-4692c2c5-c028-4975-ad00-a35d3f48045a.png">

추가 되었습니다
<img width="1160" alt="스크린샷 2021-08-18 오후 2 40 27" src="https://user-images.githubusercontent.com/87232411/129845058-e9b070d3-516e-4918-8531-c01d8a3b2086.png">

EFS 생성 확인
<img width="426" alt="스크린샷 2021-08-18 오후 2 40 50" src="https://user-images.githubusercontent.com/87232411/129845059-72e611f2-3609-4ec5-9978-2a114fada6ee.png">


WebSrv-Leader 인스턴스 SSH 접속 후 정보 확인 및 DB 주소 설정
```bash
sudo su -

# EFS 파일시스템 마운트 확인
df -hT |egrep '(File|nfs)'

# RDS 엔드포인트를 변수에 지정
RDS=엔드포인트.rds.amazonaws.com

# wp-config.php 파일에 DB 주소를 RDS 엔드포인트로 설정
sed -i "s/localhost/$RDS/g" /var/www/wordpress/wp-config.php

grep -n DB_HOST /var/www/wordpress/wp-config.php

# DB 접속 테스트
mysql -h $RDS -uroot -pqwe12345 -e 'show databases;'
mysql -h $RDS -uroot -pqwe12345
exit

# dig 조회
dig +short $RDS
```
<img width="690" alt="스크린샷 2021-08-18 오후 2 44 26" src="https://user-images.githubusercontent.com/87232411/129845062-08c5fda8-4938-4bec-9f6b-d3b72c078d89.png">
<img width="692" alt="스크린샷 2021-08-18 오후 2 45 49" src="https://user-images.githubusercontent.com/87232411/129845064-d94d8f36-b8a2-465e-b786-355fc3c45009.png">
<img width="686" alt="스크린샷 2021-08-18 오후 2 46 28" src="https://user-images.githubusercontent.com/87232411/129845066-2854d650-b054-48d3-8bf7-a326ba081859.png">


<img width="594" alt="스크린샷 2021-08-18 오후 2 46 54" src="https://user-images.githubusercontent.com/87232411/129845067-09fad6f7-96c4-4762-b5ca-bba6a4b20d02.png">


<img width="335" alt="스크린샷 2021-08-18 오후 2 47 14" src="https://user-images.githubusercontent.com/87232411/129845069-a1321d89-4a88-402a-8f5e-0e2001e1e9e0.png">

WebSrv-Leader 퍼블릭 IP주소로 접속

<img width="1369" alt="스크린샷 2021-08-18 오후 2 48 05" src="https://user-images.githubusercontent.com/87232411/129845070-1dacdc5f-9f89-44aa-893b-7235a9c9619f.png">
Wordpress 관리자 설정

<img width="802" alt="스크린샷 2021-08-18 오후 2 48 21" src="https://user-images.githubusercontent.com/87232411/129845073-b6b4969c-a276-4fa7-863b-dc205c9edc2a.png">
로그인

<img width="565" alt="스크린샷 2021-08-18 오후 2 48 41" src="https://user-images.githubusercontent.com/87232411/129845075-5b77f9c1-9cac-45fc-8531-2a39fb682314.png">
설정 클릭

<img width="142" alt="스크린샷 2021-08-18 오후 2 49 09" src="https://user-images.githubusercontent.com/87232411/129845079-13935f2e-71a3-4df5-a749-b95d82a115c4.png">

CloudFront Domain 주소로 변경 (https -> http)

<img width="666" alt="스크린샷 2021-08-18 오후 2 49 38" src="https://user-images.githubusercontent.com/87232411/129845082-0b680064-1d1b-46fb-907a-5e665b5b58a1.png">

`변경사항 저장` 클릭
<img width="201" alt="스크린샷 2021-08-18 오후 2 49 43" src="https://user-images.githubusercontent.com/87232411/129845086-b6e3edfc-98d5-4a5d-b108-87cb5a2884cf.png">

글 -> 새로 추가 클릭
<img width="216" alt="스크린샷 2021-08-18 오후 2 50 29" src="https://user-images.githubusercontent.com/87232411/129845089-01b252f1-cd11-4309-bf56-311c16d4e754.png">

글 작성 후 -> `공개` 클릭
<img width="238" alt="스크린샷 2021-08-18 오후 2 52 08" src="https://user-images.githubusercontent.com/87232411/129845092-54c8bec6-407e-4d17-839d-84beec20ee2a.png">

`공개` 클릭
<img width="296" alt="스크린샷 2021-08-18 오후 2 52 12" src="https://user-images.githubusercontent.com/87232411/129845094-1146e484-0104-4927-b1e5-70d786144e6d.png">

쨔잔
<img width="1438" alt="스크린샷 2021-08-18 오후 2 52 33" src="https://user-images.githubusercontent.com/87232411/129845097-608b17d6-cc32-4419-9c4c-dabb52d40c80.png">

## 다음 실습을 위해 할 사항
ALB 대상 그룹에 인스턴스(WebSrv Leader) 등록 취소
<img width="1171" alt="스크린샷 2021-08-18 오후 2 53 53" src="https://user-images.githubusercontent.com/87232411/129845108-7599ee50-5ec2-458e-affa-9cdc73dbc4a7.png">
<img width="1153" alt="스크린샷 2021-08-18 오후 2 54 18" src="https://user-images.githubusercontent.com/87232411/129845112-3cea0bdb-7d8d-46bb-9ee8-341d04ec9690.png">
<br/>
<br/>
<br/>

<hr/>

**참고 자료: AFOS[2기] 노션 내용**